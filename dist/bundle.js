(()=>{"use strict";var e=function(e){return new Promise((function(t,n){return chrome.storage.sync.get(e,(function(e){return chrome.runtime.lastError?n(Error(chrome.runtime.lastError.message)):t(e)}))}))};function t(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var c=0,o=function(){};return{s:o,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t,n,r,c,o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,c)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(c,o){var a=e.apply(t,n);function i(e){r(a,c,o,i,s,"next",e)}function s(e){r(a,c,o,i,s,"throw",e)}i(void 0)}))}}function o(e){return a.apply(this,arguments)}function a(){return(a=c(regeneratorRuntime.mark((function n(r){var c,a,i,s,l,u,m,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e("collect");case 2:if(c=n.sent,c=JSON.stringify(c),a="",r.children){n.next=9;break}return a+='<li class="bookmark-li" data-url="'.concat(r.url,'" data-title="').concat(r.title,'">'),a+='\n      <div class="bookmark-item">\n        <div class="bookmark-item-bg"></div>\n        <img class="iconTop" data-url="'.concat(r.url,'" data-title="').concat(r.title,'" src="').concat(-1===c.search(r.url)?"./img/collect2.svg":"./img/collected2.svg",'" />\n        <div class="bookmark-item-title">\n            <img src="https://www.google.com/s2/favicons?domain=').concat(r.url,'" alt="" />\n            <p class="ellipsis">').concat(r.title,'</p>\n          </div>\n          <p class="bookmark-item-url ellipsis">\n            ').concat(r.url,'\n          </p>\n          <div class="bookmark-info">\n            <p>').concat(-1===c.search(r.url)?"未收藏":"已收藏",'</p>\n            <img class="icon ').concat(-1===c.search(r.url)?"collect-icon":"",'" data-url="').concat(r.url,'" data-title="').concat(r.title,'" src="').concat(-1===c.search(r.url)?"./img/collect.svg":"./img/collected.svg",'" />\n          </div>\n        </div>\n      </li>'),n.abrupt("return",a);case 9:if(a='<div class="bookmark-folder">\n  <div class="bookmark-header">\n    <span class="btn-collapse btn-collapse--act"></span>\n    <h3 class="bookmark-title">'.concat(r.title,'</h3>\n  </div>\n  <ul class="bookmark-ul" style="display:none">'),!r.children.length){n.next=33;break}i=t(r.children),n.prev=12,i.s();case 14:if((s=i.n()).done){n.next=23;break}if((l=s.value).children){n.next=21;break}return n.t0=a,n.next=20,o(l);case 20:a=n.t0+=n.sent;case 21:n.next=14;break;case 23:n.next=28;break;case 25:n.prev=25,n.t1=n.catch(12),i.e(n.t1);case 28:return n.prev=28,i.f(),n.finish(28);case 31:n.next=34;break;case 33:a+='\n    <li class="no-data">\n      <img src="./img/empty.svg">\n      <p>暂无数据嗷，铁汁</p>\n    </li>';case 34:a+="</ul></div>",u=t(r.children),n.prev=36,u.s();case 38:if((m=u.n()).done){n.next=47;break}if(!(d=m.value).children){n.next=45;break}return n.t2=a,n.next=44,o(d);case 44:a=n.t2+=n.sent;case 45:n.next=38;break;case 47:n.next=52;break;case 49:n.prev=49,n.t3=n.catch(36),u.e(n.t3);case 52:return n.prev=52,u.f(),n.finish(52);case 55:return n.abrupt("return",a);case 56:case"end":return n.stop()}}),n,null,[[12,25,28,31],[36,49,52,55]])})))).apply(this,arguments)}function i(e){var n='<div class="bookmark-folder">\n  <div class="bookmark-header">\n    <span class="btn-collapse"></span>\n    <h3 class="bookmark-title">收藏夹</h3>\n  </div>\n  <ul class="bookmark-ul">';if(e.length>0){var r,c=t(e);try{for(c.s();!(r=c.n()).done;){var o=r.value;n+='\n      <li class="bookmark-li" data-url="'.concat(o.url,'">\n        <div class="bookmark-item">\n          <div class="bookmark-item-bg"></div>\n          <img class="iconTop" src="./img/collected2.svg" />\n          \x3c!-- <img class="menu" src="./img/menu.svg" /> --\x3e\n          <div class="bookmark-item-title">\n            <img src="https://www.google.com/s2/favicons?domain=').concat(o.url,'" alt="" />\n            <p class="ellipsis">').concat(o.title,'</p>\n          </div>\n          <p class="bookmark-item-url ellipsis">\n            ').concat(o.url,'\n          </p>\n          <div class="bookmark-info">\n            <p>已收藏</p>\n            <img class="icon del-icon" data-url="').concat(o.url,'" src="./img/del.svg" />\n          </div>\n        </div>\n      </li>')}}catch(e){c.e(e)}finally{c.f()}}else n+='\n    <li class="no-data">\n      <img src="./img/empty.svg">\n      <p>暂无数据嗷，铁汁</p>\n    </li>';n+="</ul></div>",document.getElementById("collect").innerHTML=n}var s=function(){var t=c(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("collect");case 2:(n=t.sent).collect?i(n.collect):chrome.storage.sync.set({collect:[]});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(){return new Promise((function(e,n){chrome.runtime.sendMessage({},function(){var n=c(regeneratorRuntime.mark((function n(r){var c,a,i,s,l,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c=JSON.parse(r),(a=document.getElementById("bookmark")).innerHTML="",i=c[0].children,s=t(i),n.prev=5,s.s();case 7:if((l=s.n()).done){n.next=15;break}return u=l.value,n.t0=a.innerHTML,n.next=12,o(u);case 12:a.innerHTML=n.t0+=n.sent;case 13:n.next=7;break;case 15:n.next=20;break;case 17:n.prev=17,n.t1=n.catch(5),s.e(n.t1);case 20:return n.prev=20,s.f(),n.finish(20);case 23:document.body.appendChild(a),e();case 25:case"end":return n.stop()}}),n,null,[[5,17,20,23]])})));return function(e){return n.apply(this,arguments)}}())}))};function u(e){var t=e.target.dataset,n=t.url,r=t.title;chrome.storage.sync.get("collect",(function(e){var t=JSON.parse(JSON.stringify(e.collect));t.push({url:n,title:r}),chrome.storage.sync.set({collect:t}),s(),l(),g()})),e.stopPropagation()}function m(e){var t=e.target.dataset.url;chrome.storage.sync.get("collect",(function(e){var n=JSON.parse(JSON.stringify(e.collect));n.forEach((function(e,r){e.url===t&&n.splice(r,1)})),chrome.storage.sync.set({collect:n}),s(),l()})),e.stopPropagation()}function d(e){var t=e.currentTarget.dataset.url;t&&window.open(t,"_blank")}function f(e){var t=e.currentTarget.parentNode.querySelector("ul");t.style.display="none"==t.style.display?"flex":"none",e.target.querySelector(".btn-collapse").classList.toggle("btn-collapse--act")}function p(e){switch(e.currentTarget.dataset.value){case"light":v("light");break;case"dark":v("dark");break;case"auto":v("auto")}}function v(e){chrome.storage.sync.set({mode:e}),document.querySelector("body").setAttribute("color-mode",e)}var g=function(){Array.from(document.querySelectorAll(".bookmark-header")).forEach((function(e){e.addEventListener("click",f)})),Array.from(document.querySelectorAll(".bookmark-li")).forEach((function(e){e.addEventListener("click",d)})),Array.from(document.querySelectorAll(".collect-icon")).forEach((function(e){e.addEventListener("click",u)})),Array.from(document.querySelectorAll(".del-icon")).forEach((function(e){e.addEventListener("click",m)}))},h=function(){g(),document.querySelector("input").onkeypress=function(e){!function(e){if(13===e.which){var t=document.querySelectorAll(".search-select")[0],n=t.selectedIndex,r=t.options[n].value,c=e.target.value,o="";switch(r){case"baidu":o="https://baidu.com/s?wd=";break;case"google":o="https://www.google.com/search?q=";break;case"bing":o="https://www.bing.com/search?q=";break;case"sougou":o="https://www.sogou.com/web?query="}window.open("".concat(o).concat(c),"_blank")}}(e)},Array.from(document.querySelectorAll(".switch-tab")).forEach((function(e){e.addEventListener("click",p)})),document.querySelector(".form-item").addEventListener("click",(function(e){document.querySelector(".form-item").classList.toggle("mode-open")})),Array.from(document.querySelectorAll(".form-item svg")).forEach((function(e){e.addEventListener("click",p)}))};function k(e,t,n,r,c,o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,c)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,c){var o=e.apply(t,n);function a(e){k(o,r,c,a,i,"next",e)}function i(e){k(o,r,c,a,i,"throw",e)}a(void 0)}))}}function b(){chrome.storage.sync.get("mode",(function(e){var t=e.mode;console.log(t),t||(chrome.storage.sync.set({mode:"auto"}),function(e){throw new TypeError('"mode" is read-only')}(),t="auto"),document.querySelector("body").setAttribute("color-mode",t)}))}function w(){return(w=y(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return e.next=4,s();case 4:h(),b();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){w.apply(this,arguments)}()})();
//# sourceMappingURL=bundle.js.map